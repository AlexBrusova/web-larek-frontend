# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта
Раздел описывает общий подход к построению приложения и использование компонентного подхода.

Архитектура данного проекта основана на паттерне MVP, который делит приложение на три компонента: модель, представление и презентер. Модель управляет данными, представление визуализирует эти данные, а презентер обеспечивает взаимодействие между моделью и представлением.

**Model** - отвечает за работу с данными, выполнение расчетов и управление бизнес-процессами, включая получение, обновление и удаление информации.
**View** -  предоставляет пользователю интерфейс и данные из модели. Оно занимается отображением информации, обработкой нажатий кнопок, заполнением и отправкой форм, а также их валидацией.
**Presenter** - выполняет роль промежуточного слоя между моделью и представлением, обрабатывая события.

## Функциональность

- **Просмотр товаров**: Пользователи могут просматривать доступные товары, фильтровать их по категориям и ценам.
- **Корзина**: Возможность добавлять товары в корзину, изменять количество и удалять товары.
- **Оформление заказа**: Пользователи могут оформить заказ, указав свои контактные данные и способ оплаты.
- **Адаптивный дизайн**: Приложение имеет адаптивный интерфейс, который удобно использовать на мобильных и настольных устройствах.

## Классы

### Класс `Api`

#### Описание:
Класс `Api` предназначен для упрощения работы с API через отправку HTTP-запросов. Он предоставляет методы для отправки запросов типа `GET` и `POST`, автоматически обрабатывает ответы в формате JSON и поддерживает базовую обработку ошибок.

#### Конструктор:
- **`baseUrl`** (`string`): Базовый URL API, который будет использоваться для всех запросов.
- **`options`** (`RequestInit`): Опциональный параметр. Объект с настройками запроса (например, заголовки). По умолчанию добавляется заголовок `Content-Type: application/json`, но можно передать дополнительные заголовки через `options`.

#### Свойства:
- **`baseUrl`**: Строка, содержащая базовый URL для API (не изменяется после создания).
- **`options`**: Объект типа `RequestInit`, содержащий настройки HTTP-запроса, включая заголовки.

#### Методы:

1. **`get(uri: string)`**:
   - Отправляет HTTP-запрос `GET` на указанный `uri`, добавляемый к `baseUrl`.
   - Возвращает `Promise` с данными ответа в формате JSON, если запрос был успешным.
   - Обрабатывает ошибки, возвращая сообщение об ошибке или текст статуса.

2. **`post(uri: string, data: object, method: ApiPostMethods = 'POST')`**:
   - Отправляет HTTP-запрос `POST` (или другой метод, например `PUT`, `PATCH`) на указанный `uri`.
   - Объект `data` преобразуется в JSON и отправляется в теле запроса.
   - Возвращает `Promise` с данными ответа или ошибкой.

3. **`handleResponse(response: Response)`** (protected):
   - Вспомогательный метод для обработки ответа от API.
   - Если запрос успешен (`response.ok`), возвращает данные в формате JSON.
   - В случае ошибки возвращает сообщение об ошибке или текст статуса ответа.

#### Пример использования:
Класс `Api` можно использовать для взаимодействия с REST API. Он позволяет отправлять `GET` и `POST` запросы, автоматически обрабатывая ответы в формате JSON и ошибки. Удобен для стандартного взаимодействия с любыми API.

### Класс `Component`

#### Описание:
Абстрактный класс `Component<T>` служит базой для создания компонентов пользовательского интерфейса, упрощая управление элементами DOM. Класс предоставляет методы для работы с элементами: добавление/удаление классов, управление видимостью, текстом, атрибутами и изображениями.

#### Конструктор:
- **`container`** (`HTMLElement`): Корневой HTML-элемент, с которым работает компонент. Данный элемент передаётся в конструктор и является защищённым и неизменяемым (только для чтения).

#### Свойства:
- **`container`**: Корневой элемент типа `HTMLElement`, на который происходит рендер компонента и с которым взаимодействуют все методы.

#### Методы:

1. **`toggleClass(element: HTMLElement, className: string, force?: boolean)`**:
   - Переключает CSS-класс на элементе `element`.
   - Аргументы:
     - `element`: HTML-элемент.
     - `className`: Название класса.
     - `force`: Опционально. Принудительно добавляет или удаляет класс.

2. **`setText(element: HTMLElement, value: string)`** (protected):
   - Устанавливает текстовое содержимое HTML-элемента.
   - Аргументы:
     - `element`: HTML-элемент.
     - `value`: Текст, который нужно вставить.

3. **`setDisabled(element: HTMLElement, state: boolean)`**:
   - Включает или выключает атрибут `disabled` на элементе.
   - Аргументы:
     - `element`: HTML-элемент.
     - `state`: Если `true`, добавляет атрибут `disabled`, если `false` — удаляет.

4. **`setHidden(element: HTMLElement)`** (protected):
   - Скрывает элемент, изменяя его свойство `display` на `none`.

5. **`setVisible(element: HTMLElement)`** (protected):
   - Делает элемент видимым, удаляя значение свойства `display`.

6. **`setImage(el: HTMLImageElement, src: string, alt?: string)`** (protected):
   - Устанавливает изображение на элемент `img` с указанием источника и альтернативного текста.
   - Аргументы:
     - `el`: HTML-элемент изображения.
     - `src`: URL изображения.
     - `alt`: Опционально. Альтернативный текст для изображения.

7. **`render(data?: Partial<T>)`**:
   - Метод для рендера компонента. Можно передать данные для обновления свойств компонента.
   - Аргументы:
     - `data`: Опционально. Объект с новыми данными для обновления состояния компонента.
   - Возвращает корневой элемент компонента (`container`).

#### Пример использования:
Класс `Component` можно расширять для создания более специфических компонентов интерфейса, предоставляя базовые методы для взаимодействия с элементами DOM. Этот класс полезен для создания UI компонентов с часто используемыми функциями, такими как скрытие, показ, изменение текста или изображения.

### Класс `EventEmitter`

#### Описание:
Класс `EventEmitter` реализует интерфейс `IEvents` и используется для управления событиями в приложении. Он предоставляет механизм подписки, отписки и вызова событий, что позволяет компонентам взаимодействовать через систему подписки-оповещения. Это позволяет разработчикам создавать реактивные системы, где события инициируются и перехватываются по мере изменения состояния или пользовательских действий.

#### Конструктор:
- **`new EventEmitter()`**: Создаёт новый объект класса, инициализируя карту `_events`, которая связывает события с их подписчиками.

#### Свойства:
- **`_events: Map<EventName, Set<Subscriber>>`**: Карта, где ключом является имя события (строка или регулярное выражение), а значением — набор подписчиков (функций-обработчиков).

#### Методы:

1. **`on<T extends object>(eventName: EventName, callback: (event: T) => void)`**:
   - Регистрирует подписчика на определённое событие.
   - Аргументы:
     - `eventName`: Имя события или регулярное выражение, на которое подписываются.
     - `callback`: Функция-обработчик, которая будет вызвана при возникновении события.

2. **`off(eventName: EventName, callback: Subscriber)`**:
   - Удаляет подписчика с указанного события.
   - Аргументы:
     - `eventName`: Имя события или регулярное выражение.
     - `callback`: Функция, которая была ранее зарегистрирована на это событие.

3. **`emit<T extends object>(eventName: string, data?: T)`**:
   - Инициирует событие с указанными данными, вызывая все подписанные функции.
   - Аргументы:
     - `eventName`: Имя события, которое будет инициировано.
     - `data`: Опциональные данные, которые будут переданы подписчикам.

4. **`onAll(callback: (event: EmitterEvent) => void)`**:
   - Позволяет подписаться на все события, независимо от их имени.
   - Аргументы:
     - `callback`: Функция-обработчик, которая будет вызвана на любое событие.

5. **`offAll()`**:
   - Очищает все зарегистрированные события и их подписчиков.

6. **`trigger<T extends object>(eventName: string, context?: Partial<T>)`**:
   - Создаёт функцию-обёртку, которая генерирует событие при вызове.
   - Аргументы:
     - `eventName`: Имя события, которое будет сгенерировано при вызове функции.
     - `context`: Опциональный объект, содержащий дополнительные данные для события.

#### Пример использования:
Класс `EventEmitter` может быть использован для создания системы событий внутри приложения, которая позволяет компонентам и сервисам взаимодействовать через публикацию и подписку на события. Например, можно использовать `EventEmitter` для оповещения об изменениях данных в модели или реагирования на пользовательские действия.

### Класс `Model<T>`

#### Описание:
Класс `Model<T>` представляет абстрактную модель данных, которую можно использовать для представления различных сущностей в приложении. Он включает в себя механизм уведомления об изменениях модели через события, используя систему событий, реализованную интерфейсом `IEvents`. Класс позволяет удобно управлять данными и информировать другие части системы о любых изменениях.

#### Конструктор:
- **`new Model(data: Partial<T>, events: IEvents)`**: Создаёт экземпляр модели, используя переданные данные и объект для управления событиями.
  - **Параметры**:
    - `data`: Частичный объект данных типа `T`, который будет использоваться для инициализации модели.
    - `events`: Интерфейс управления событиями, который используется для отправки уведомлений об изменениях в модели.

#### Методы:

1. **`emitChanges(event: string, payload?: object)`**:
   - Отправляет уведомление (событие), что модель изменилась.
   - Аргументы:
     - `event`: Имя события, которое будет отправлено.
     - `payload`: Опциональный объект с данными, которые будут отправлены вместе с событием.
   - Это позволяет другим компонентам системы подписываться на изменения модели и реагировать на них.

#### Пример использования:
`Model<T>` может быть использован для реализации различных моделей данных, таких как пользователь, продукт, заказы и т.д. Когда модель изменяется (например, обновляются данные пользователя), метод `emitChanges` позволяет уведомить другие части системы о произошедших изменениях.

### Класс `ShoppingCart`

#### Описание:
`ShoppingCart` — это класс, расширяющий абстрактный класс `Component`. Он представляет собой компонент для управления корзиной товаров на веб-странице. Класс содержит методы для отображения списка товаров, подсчета общей стоимости, обработки оформления заказа и других операций, связанных с корзиной.

#### Конструктор:
- **`new ShoppingCart(classPrefix: string, rootElement: HTMLElement, customEvents: IEvents)`**: Создаёт экземпляр компонента корзины.
  - **Параметры**:
    - `classPrefix`: Строка-префикс для классов, по которой элементы корзины будут искаться в DOM.
    - `rootElement`: Корневой DOM-элемент, в котором содержатся элементы корзины.
    - `customEvents`: Интерфейс для работы с кастомными событиями, такими как оформление заказа.
  - В конструкторе инициализируются элементы корзины: кнопка оформления заказа, элемент для отображения общей суммы, и список товаров.

#### Методы:

1. **`set totalPrice(price: number)`**:
   - Устанавливает общую стоимость товаров в корзине и обновляет содержимое элемента, отображающего эту сумму.
   - Аргумент:
     - `price`: Числовое значение, представляющее общую стоимость товаров.

2. **`set items(elements: HTMLElement[])`**:
   - Обновляет содержимое списка товаров в корзине.
   - Аргумент:
     - `elements`: Массив элементов, представляющих товары. Если список пуст, кнопка оформления заказа блокируется.

3. **`disableOrderButton()`**:
   - Метод для ручной блокировки кнопки оформления заказа.

4. **`updateItemIndices()`**:
   - Обновляет индексы товаров в корзине, устанавливая порядковые номера для каждого товара.

#### Использование:
Этот класс полезен для создания функциональности корзины на веб-сайте, где необходимо отображать список товаров, общую стоимость и предоставлять возможность пользователю оформить заказ, взаимодействуя с DOM-элементами и кастомными событиями.

### Класс `CatalogCartItem`

#### Описание:
`CatalogCartItem` представляет собой компонент для работы с отдельным товаром в корзине. Этот класс наследуется от абстрактного класса `Component` и управляет отображением информации о товаре в корзине, такой как его название, цена, индекс, а также предоставляет возможность удалить товар.

#### Конструктор:
- **`new CatalogCartItem(classPrefix: string, rootElement: HTMLElement, actions?: ICatalogItemCartActions)`**: Создаёт экземпляр товара в корзине.
  - **Параметры**:
    - `classPrefix`: Префикс для классов, по которому будут искаться DOM-элементы товара.
    - `rootElement`: Корневой DOM-элемент, который содержит информацию о товаре.
    - `actions`: Необязательный объект, содержащий действия, такие как удаление товара (через колбэк `onRemove`).

В конструкторе производится инициализация элементов товара через поиск по указанному префиксу классов и назначение обработчика для кнопки удаления товара.

#### Методы:

1. **`set title(name: string)`**:
   - Сеттер для установки названия товара. Обновляет текстовое содержимое элемента `itemTitle`.

2. **`set index(idx: number)`**:
   - Сеттер для установки индекса товара в корзине. Обновляет текстовое содержимое элемента `itemIndex`.

3. **`set price(amount: number)`**:
   - Сеттер для установки цены товара. Обновляет текстовое содержимое элемента `itemPrice`.

#### Приватные свойства:
- **`itemIndex`**: Элемент, отображающий индекс товара.
- **`itemTitle`**: Элемент, отображающий название товара.
- **`itemPrice`**: Элемент, отображающий цену товара.
- **`removeButton`**: Кнопка для удаления товара из корзины.

#### Особенности:
- При удалении товара вызывается колбэк `onRemove`, если он был передан через параметр `actions`. Также товар удаляется из DOM.

#### Использование:
`CatalogCartItem` применяется для управления отображением и взаимодействием с товарами в корзине покупок. Этот класс позволяет устанавливать и обновлять название, индекс и цену товара, а также удалять его из корзины.

### Класс `FormHandler`

#### Описание:
`FormHandler` — это класс, который предназначен для управления HTML-формами и их взаимодействием с кастомными событиями. Он наследуется от класса `Component` и обрабатывает отправку формы, валидацию полей, а также отображение сообщений об ошибках.

#### Конструктор:
- **`new FormHandler(formElement: HTMLFormElement, eventHandler: IEvents)`**: Создаёт экземпляр для управления формой.
  - **Параметры**:
    - `formElement`: HTML-элемент формы, с которой будет работать класс.
    - `eventHandler`: Объект для управления кастомными событиями (например, для отправки формы или отслеживания изменений в полях).

В конструкторе происходит инициализация кнопки отправки формы и контейнера для отображения ошибок. Также добавляются обработчики событий `input` для отслеживания изменений в полях формы и `submit` для обработки отправки формы.

#### Методы:

1. **`handleFieldInput(fieldName: keyof U, fieldValue: string)`** _(приватный метод)_:
   - Обрабатывает изменение полей формы. Вызывает кастомное событие `'formInput:update'` с данными о названии поля и его значении.

2. **`set isValid(isFormValid: boolean)`** _(сеттер)_:
   - Устанавливает, является ли форма валидной. Блокирует кнопку отправки формы, если форма некорректна.

3. **`set errorMessages(messages: string)`** _(сеттер)_:
   - Устанавливает сообщения об ошибках в форме. Обновляет текстовое содержимое контейнера `errorContainer`.

4. **`updateView(state: Partial<U> & IFormStatus)`**:
   - Обновляет интерфейс формы в соответствии с её состоянием. Принимает объект состояния, включающий валидность формы, сообщения об ошибках и значения полей формы.

#### Приватные свойства:
- **`submitButton`**: Кнопка отправки формы.
- **`errorContainer`**: Элемент для отображения ошибок.

#### Особенности:
- Обработчик события `input` отслеживает изменения в полях формы и оповещает об этом через кастомные события.
- При отправке формы происходит блокировка стандартного поведения и генерируется кастомное событие для отправки формы.

#### Использование:
`FormHandler` предназначен для работы с интерактивными HTML-формами, обеспечивая управление валидацией, отображением ошибок и взаимодействием с внешними обработчиками событий. Этот класс упрощает обработку форм и их интеграцию с другими частями системы через события.

### Класс `ModalComponent`

#### Описание:
`ModalComponent` — это класс для создания и управления модальными окнами. Он наследуется от базового класса `Component` и предоставляет методы для открытия, закрытия и рендеринга модального окна с заданными данными. Класс также обрабатывает события, связанные с модальным окном, такие как его открытие и закрытие.

#### Конструктор:
- **`new ModalComponent(container: HTMLElement, eventEmitter: IEvents)`**: Создаёт экземпляр для управления модальным окном.
  - **Параметры**:
    - `container`: HTML-элемент, в котором размещено модальное окно.
    - `eventEmitter`: Объект для обработки событий, связанных с модальным окном.

Конструктор инициализирует кнопку закрытия и основной контент модального окна. Добавляются обработчики событий для закрытия окна при клике на кнопку или за пределами содержимого.

#### Методы:

1. **`set content(value: HTMLElement)`** _(сеттер)_:
   - Устанавливает новое содержимое для модального окна, заменяя текущее содержимое в элементе `modalContent`.

2. **`show()`**:
   - Отображает модальное окно, добавляя класс активности (`modal_active`). Также вызывает событие `modal:open`, оповещая систему о том, что окно открыто.

3. **`hide()`**:
   - Скрывает модальное окно, удаляя класс активности. Очищает содержимое модального окна и генерирует событие `modal:close`, оповещая о его закрытии.

4. **`render(data: IModalData)`**:
   - Отвечает за рендеринг модального окна с данными. Вызывает метод `render` родительского класса для обновления состояния и отображает окно, вызывая метод `show`.

#### Приватные свойства:
- **`closeButton`**: Кнопка закрытия модального окна.
- **`modalContent`**: Элемент, содержащий контент модального окна.

#### Особенности:
- Класс обеспечивает управление модальными окнами с поддержкой событий. Модальные окна можно легко интегрировать в приложение и управлять ими через события.
- Закрытие модального окна возможно как по клику на кнопку закрытия, так и по клику вне содержимого.

#### Использование:
`ModalComponent` предназначен для создания динамических модальных окон с гибким управлением их состоянием. Класс полезен для реализации диалогов, уведомлений и любых других взаимодействий с пользователем, требующих всплывающего окна.

### Класс `Success`

#### Описание:
`Success` — это компонент для отображения сообщений об успешных операциях в интерфейсе. Он предоставляет возможность настраивать описание успешного события и управлять его отображением. Также компонент может обрабатывать события, связанные с закрытием сообщения.

#### Конструктор:
- **`new Success(blockName: string, container: HTMLElement, actions?: ISuccessActions)`**: Создаёт экземпляр компонента для работы с сообщениями об успехе.
  - **Параметры**:
    - `blockName`: Имя блока для поиска элементов внутри контейнера.
    - `container`: HTML-элемент, в котором будет размещено сообщение.
    - `actions`: Необязательный объект с обработчиками событий, например, для обработки нажатия на кнопку закрытия.

Конструктор ищет элементы внутри контейнера, такие как кнопка закрытия и элемент для отображения описания, основываясь на переданном имени блока (`blockName`).

#### Методы:

1. **`set description(value: number)`** _(сеттер)_:
   - Обновляет текстовое содержимое элемента `descriptionElement`, отображая переданное число в формате: "Списано X синапсов". Используется для установки значения описания успешного события.

#### Приватные свойства:
- **`button`**: Кнопка для закрытия сообщения об успехе.
- **`descriptionElement`**: Элемент, отображающий описание события.

#### Особенности:
- Компонент позволяет гибко изменять описание успешного действия и предоставляет интерфейс для обработки события закрытия через кнопку.
- Обработчик нажатия на кнопку добавляется при условии, что он передан в параметре `actions`.

#### Использование:
`Success` предназначен для создания динамических уведомлений об успешных действиях пользователя. Например, после успешного списания синапсов он может показывать сообщение с количеством списанных единиц и позволять пользователю закрыть это уведомление.

### Класс `AppState`

#### Описание:
Класс `AppState` расширяет базовый класс `Model<IAppState>` и отвечает за управление состоянием приложения, включая товары, корзину и заказы. Он предоставляет методы для добавления и удаления товаров, управления заказами и валидации данных формы заказа.

#### Свойства:

- **`items: Product[]`**: Массив товаров в каталоге.
- **`modal: string`**: Текущий активный модальный компонент.
- **`basket: Product[]`**: Массив товаров, добавленных в корзину.
- **`order: IOrder`**: Объект, представляющий текущий заказ с полями:
  - `items`: Массив идентификаторов товаров в заказе.
  - `payment`: Способ оплаты (по умолчанию — "Card").
  - `total`: Общая сумма заказа.
  - `address`, `email`, `phone`: Контактные данные.
- **`formErrors: FormErrors`**: Объект для хранения ошибок валидации формы.

#### Методы:

1. **`addToBasket(value: Product)`**:
   - Добавляет товар в корзину.

2. **`deleteFromBasket(id: string)`**:
   - Удаляет товар из корзины по его идентификатору.

3. **`clearBasket()`**:
   - Очищает корзину, удаляя все товары.

4. **`getBasketTotal()`**:
   - Возвращает общее количество товаров в корзине.

5. **`setItems()`**:
   - Заполняет массив товаров в объекте заказа на основе корзины.

6. **`setOrderField(field: keyof IOrderData, value: string)`**:
   - Устанавливает значение определённого поля заказа.
   - Для поля `payment` проверяет корректность введённого способа оплаты.

7. **`validateOrder()`**:
   - Проверяет валидность заказа (наличие адреса и способа оплаты) и возвращает `true`, если заказ валиден.

8. **`validateContacts()`**:
   - Проверяет валидность контактной информации (наличие email и телефона) и возвращает `true`, если данные корректны.

9. **`refreshOrder()`**:
   - Сбрасывает состояние заказа до первоначального.

10. **`getTotal()`**:
    - Рассчитывает и возвращает общую стоимость товаров в корзине.

11. **`setCatalog(items: ProductApiData[])`**:
    - Устанавливает каталог товаров из данных API.

12. **`resetSelected()`**:
    - Сбрасывает выбранные товары в каталоге.

#### Применение:
`AppState` используется для управления данными приложения, касающимися корзины и заказа. Он может быть интегрирован в систему для работы с динамическими обновлениями состояния, включая взаимодействие с формами и каталожными данными, а также поддерживает валидацию и управление ошибками.

### Класс `Product`

#### Описание:
Класс `Product` наследует `Component<ProductApiData>` и отвечает за отображение и взаимодействие с данными о товарах. Он представляет собой карточку товара с возможностью обработки кликов и управлением данными, такими как название, изображение, категория и цена.

#### Свойства:

- **`_title: HTMLElement`**: Элемент для отображения названия товара.
- **`_image: HTMLImageElement`**: Элемент для отображения изображения товара.
- **`_category: HTMLElement`**: Элемент для отображения категории товара.
- **`_price: HTMLElement`**: Элемент для отображения цены товара.
- **`_button: HTMLButtonElement`**: Кнопка для взаимодействия с товаром (например, добавление в корзину).

#### Конструктор:

Принимает следующие параметры:
- **`blockName: string`**: Название блока для поиска элементов в DOM.
- **`container: HTMLElement`**: Корневой элемент для компонента товара.
- **`actions?: IProductActions`**: Опциональный объект действий, который содержит обработчики событий (например, обработчик клика).

Конструктор инициализирует DOM-элементы карточки товара, такие как заголовок, изображение, кнопка и категория. Если передан обработчик события, он привязывается к кнопке (или контейнеру).

#### Методы и сеттеры:

1. **`set id(value: string)`**: Устанавливает идентификатор товара, записывая его в атрибут `data-id` контейнера.
   - **`get id(): string`**: Возвращает идентификатор товара.

2. **`set title(value: string)`**: Устанавливает текст заголовка товара.
   - **`get title(): string`**: Возвращает текст заголовка товара.

3. **`set image(value: string)`**: Устанавливает ссылку на изображение товара, добавляя префикс `CDN_URL`.

4. **`set selected(value: boolean)`**: Устанавливает состояние кнопки (активна или отключена) на основе выбранности товара.

5. **`set price(value: number | null)`**: Устанавливает цену товара. Если цена не указана (`null`), текст будет отображать "Бесценно", а кнопка станет неактивной.

6. **`set category(value: CategoryType)`**: Устанавливает текст категории товара и добавляет соответствующий класс для стилизации на основе значения категории.

#### Применение:
Класс `Product` используется для отображения товаров в каталоге и управления интерактивностью (например, добавление товара в корзину). Он может динамически обновлять данные карточки товара на основе API или других источников данных.

### Класс `CatalogIProduct`

#### Описание:
`CatalogIProduct` является классом, который наследует функциональность класса `Product`. Он представляет собой элемент карточки товара, используемый в каталоге продуктов. Основная цель этого класса — инкапсулировать специфичную логику для карточек товаров, которые могут отображаться в каталоге, и передавать соответствующие действия, связанные с товарами.

#### Конструктор:

- **`constructor(container: HTMLElement, actions?: IProductActions)`**:
  - **`container: HTMLElement`**: Корневой элемент, в котором будет размещен товар.
  - **`actions?: IProductActions`**: Опциональный объект, содержащий обработчики событий, связанные с товаром. Это может включать действия, такие как добавление товара в корзину или обработка кликов по карточке товара.

Внутри конструктора происходит вызов конструктора родительского класса `Product` с параметрами:
- **`'card'`**: Это имя блока, используемое для поиска соответствующих элементов в контейнере.
- **`container`**: Переданный элемент контейнера, в который будет встроен товар.
- **`actions`**: Переданные обработчики действий, которые могут быть применены к товару.

#### Применение:
Класс `CatalogIProduct` предназначен для упрощения работы с товарами в каталоге, позволяя легко создавать и настраивать карточки товаров с необходимыми действиями. Он может быть использован в интерфейсе пользователя для отображения списка доступных товаров с возможностью взаимодействия.

### Класс `CatalogProductPreview`

#### Описание:
`CatalogProductPreview` является производным классом от `Product`, предназначенным для отображения предварительного просмотра карточки товара в каталоге. Этот класс добавляет функциональность для управления описанием товара, позволяя обновлять и отображать текстовую информацию о продукте.

#### Конструктор:

- **`constructor(container: HTMLElement, actions?: IProductActions)`**:
  - **`container: HTMLElement`**: Элемент-контейнер, в который будет встроен товар.
  - **`actions?: IProductActions`**: Опциональный объект, содержащий обработчики событий, связанные с товаром, такие как действия при нажатии на кнопку или другие взаимодействия.

Внутри конструктора вызывается конструктор родительского класса `Product` с параметрами:
- **`'card'`**: Название блока, используемое для поиска элементов в контейнере.
- **`container`**: Элемент-контейнер, в который будет помещен товар.
- **`actions`**: Обработчики действий, которые могут быть связаны с этой карточкой товара.

#### Свойства:
- **`_description: HTMLElement`**: Элемент, отображающий текстовое описание товара. Он инициализируется при создании экземпляра класса, ищет соответствующий элемент в контейнере на основе имени блока.

#### Методы:
- **`set description(value: string)`**: Сеттер для обновления текста описания товара. Устанавливает текстовое содержимое элемента `_description` на переданное значение.

#### Применение:
Класс `CatalogProductPreview` позволяет разработчикам создавать карточки товаров с возможностью отображения краткого описания, улучшая пользовательский интерфейс и облегчая восприятие информации о продукте. Его можно использовать в каталогах, где необходимо показать информацию о товаре на первой странице или в предварительном просмотре.

### Класс `Contacts`

#### Описание:
`Contacts` представляет собой класс, унаследованный от `FormHandler`, который предназначен для обработки формы контактной информации. Этот класс обеспечивает функциональность для управления событиями и валидацией, связанными с формой.

#### Конструктор:

- **`constructor(container: HTMLFormElement, events: IEvents)`**:
  - **`container: HTMLFormElement`**: HTML-элемент формы, который будет обрабатываться классом. Этот элемент используется для добавления логики обработки событий, связанных с формой.
  - **`events: IEvents`**: Объект, содержащий методы для обработки пользовательских событий. Он позволяет генерировать события, такие как отправка формы или изменение полей.

Внутри конструктора происходит вызов конструктора родительского класса `FormHandler`, передавая ему параметры `container` и `events`, что позволяет использовать все механизмы обработки формы, определенные в родительском классе.

#### Применение:
Класс `Contacts` можно использовать для создания форм, которые требуют ввода контактной информации, таких как имя, адрес электронной почты и номер телефона. Он предоставляет разработчикам возможность легко интегрировать обработку форм и управление событиями в веб-приложениях, улучшая взаимодействие с пользователем.

### Класс `Order`

#### Описание:
`Order` — это класс, который расширяет функциональность `FormHandler`, предназначенный для обработки формы заказа. Он реализует логику выбора способа оплаты (наличными или картой) и управляет состоянием кнопок оплаты в интерфейсе.

#### Конструктор:

- **`constructor(blockName: string, container: HTMLFormElement, events: IEvents)`**:
  - **`blockName: string`**: Название блока, используемое для идентификации элементов в DOM и организации стилей.
  - **`container: HTMLFormElement`**: HTML-форма, которая будет обрабатываться классом. Включает элементы управления, такие как кнопки оплаты.
  - **`events: IEvents`**: Объект для обработки пользовательских событий, позволяющий взаимодействовать с другими частями приложения.

В конструкторе происходит инициализация кнопок для выбора способа оплаты, а также добавление обработчиков событий клика на эти кнопки. При нажатии на кнопку обновляется состояние интерфейса и вызывается метод для обновления значения поля оплаты.

#### Метод `disableButtons()`:

- **`disableButtons()`**: 
  - Метод, который отключает активные состояния кнопок оплаты. Он сбрасывает классы, которые обозначают активные кнопки, и позволяет вернуться к исходному состоянию.

#### Применение:
Класс `Order` удобно использовать в веб-приложениях для управления процессом оформления заказа, обеспечивая пользователям простой и интуитивно понятный интерфейс для выбора способа оплаты. С помощью этого класса разработчики могут легко реализовать взаимодействие с формами и реагировать на действия пользователей.

### Класс `Page`

#### Описание:
`Page` — это класс, который наследует от `Component` и предназначен для управления интерфейсом страницы. Он отвечает за инициализацию различных элементов страницы, таких как счетчик товаров в корзине, каталог товаров и обертка страницы. Класс также обрабатывает взаимодействия пользователя с элементами интерфейса, например, открытие корзины.

#### Конструктор:

- **`constructor(container: HTMLElement, events: IEvents)`**:
  - **`container: HTMLElement`**: Корневой HTML-элемент страницы, в котором располагаются остальные элементы.
  - **`events: IEvents`**: Объект для обработки событий, который позволяет взаимодействовать с другими компонентами приложения.

В конструкторе происходит инициализация ключевых элементов страницы с помощью функции `ensureElement`, которая гарантирует, что элементы существуют в DOM. Также добавляется обработчик клика на элемент корзины, который вызывает событие открытия корзины.

#### Сеттеры:

- **`set counter(value: number)`**: 
  - Устанавливает значение счетчика товаров в корзине, обновляя текст соответствующего элемента.

- **`set catalog(items: HTMLElement[])`**: 
  - Устанавливает элементы каталога, заменяя текущее содержимое элемента каталога новыми элементами.

- **`set locked(value: boolean)`**: 
  - Устанавливает состояние заблокированной страницы. Если `value` равно `true`, добавляется класс блокировки, что может быть полезно для предотвращения взаимодействия с элементами страницы в определенных ситуациях.

#### Применение:
Класс `Page` позволяет разработчикам легко управлять элементами интерфейса на странице, обеспечивая удобное взаимодействие с пользователями. Он является важной частью архитектуры приложения, так как позволяет эффективно обновлять состояние интерфейса в ответ на действия пользователя и события.

## Интерфейсы

1. **`IContacts`**
   - **Описание**: Определяет структуру данных для контактной информации пользователя.
   - **Свойства**:
     - `phone: string` — номер телефона.
     - `email: string` — адрес электронной почты.

2. **`ICard`**
   - **Описание**: Определяет структуру данных для карточки товара.
   - **Свойства**:
     - `id: string` — уникальный идентификатор товара.
     - `title: string` — название товара.
     - `category: string` — категория товара.
     - `description: string` — описание товара.
     - `image: string` — URL изображения товара.
     - `price: number | null` — цена товара.
     - `selected: boolean` — состояние выбора товара.

3. **`IAppState`**
   - **Описание**: Определяет структуру состояния приложения.
   - **Свойства**:
     - `items: Product[]` — список товаров.
     - `modal: string` — состояние модального окна.
     - `basket: Product[]` — массив товаров в корзине.
     - `order: IOrder` — текущий заказ.

4. **`ICardActions`**
   - **Описание**: Определяет действия, связанные с карточками товаров.
   - **Свойства**:
     - `onClick: (event: MouseEvent) => void` — функция для обработки события клика.

5. **`IOrder`**
   - **Описание**: Определяет структуру заказа.
   - **Свойства**:
     - `items: string[]` — массив идентификаторов товаров в заказе.
     - `payment: string` — способ оплаты (например, "Card" или "Cash").
     - `total: number | null` — общая сумма заказа.
     - `address: string` — адрес доставки.
     - `email: string` — адрес электронной почты покупателя.
     - `phone: string` — номер телефона покупателя.

6. **`FormErrors`**
   - **Описание**: Определяет структуру ошибок формы.
   - **Свойства**:
     - `email?: string` — ошибка для поля email.
     - `phone?: string` — ошибка для поля телефона.
     - `address?: string` — ошибка для поля адреса.
     - `payment?: string` — ошибка для поля способа оплаты.

## Взаимодействие компонентов
Объясняет, как компоненты общаются между собой и как происходит обновление состояния приложения.
Компоненты взаимодействуют друг с другом через события и методы. Например, когда пользователь добавляет товар в корзину, соответствующее событие отправляется в `AppState`, который обновляет состояние приложения и уведомляет другие компоненты о произошедших изменениях.

Основной поток взаимодействия следующий:

1. Пользователь взаимодействует с компонентами интерфейса (например, нажимает кнопку добавления товара).
2. Компонент инициирует действие (например, добавление товара в корзину), которое обрабатывается в классе `AppState`.
3. `AppState` обновляет состояние приложения и вызывает соответствующие события.
4. Подписанные компоненты реагируют на события и обновляют свое состояние (например, обновляют количество товаров в корзине).

